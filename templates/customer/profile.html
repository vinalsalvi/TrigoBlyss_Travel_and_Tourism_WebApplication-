{% extends 'customer/common/layout.html' %}
{% load static %}
{% block content %}
<!-- <section class="w3l-inner-banner-main"> -->
        <div class="banner-9 sec-img">
            <div class="wrapper">
                <ul class="breadcrumbs-custom-path">
                    <li><a href="/customer/homepage">Home <span class="fa fa-angle-right" aria-hidden="true"></span></a></li>
                    <li><a href="#">User <span class="fa fa-angle-right" aria-hidden="true"></span></a></li>
                    <li class="active">Your Account</li>
                </ul>
            </div>
        </div>
<!-- </section> -->
  <div class="w3l-galleries-19" style="background-color: white ; height: 700px;"   >    
  
            <!-- Profile card -->
            <section class="w3l-text-22" style="margin-right:50px ;  height: 400px; margin-left: 50px; margin-top:30px; width: 300px; border-radius: 8px;box-shadow: 4px 5px 10px lightgray; float: left; position: sticky; top: 50px; background-color: white; margin-bottom: 150px; ">
                <div class="userimg" >
                    <div>
                        <h3 style="margin-top: 15px; text-align: center;">{{user.username}}</h3>
                    </div>
                    {% for p in profile %}
                    <img src="/media/{{p.profile}}" height="150px;" width="150px;" style="margin:20px 0 20px 75px; border-radius:80px" id="profile-pic" >
                    {% endfor %}
                    <label for="input-file" id="uploadbtn" style="position: absolute; height: 30px ; width: 30px;padding: 3px 7px 8px; border-radius: 50%; cursor: pointer;background-color: rgb(173,172, 173, 0.801); box-shadow: 2px 4px 4px gray; color: white; transform: translateX(-90%); margin-top: 100px;"><i class="fas fa-camera"></i></label>
                    <input type="file" name="" accept="image/jpg , image/jpeg , image/png" id="input-file" name="image" style="display:none;" input type="submit" value="submit">
                </div>
                 <a href=""><div style=" height: 30px; width:300px; margin: 30px 0px 10px 100px ;"><i class="fa-regular fa-user" style="margin-right:8px"></i>Profile</div></a>
                   <div style=" height: 30px; width:300px; margin: 10px 0 10px 100px ;">
                   <a href="#div1"> <i class="fa-solid fa-right-to-bracket" style="margin-right:8px"></i>Login Details</div></a>
                   <a href="/customer/logout"><div style=" height: 30px; width:300px; margin: 10px 0 10px 100px ;">
                   <i class="fa-solid fa-power-off" style="margin-right:8px"></i>Logout</div></a>
            </section>


         
            <form method="POST" action="profile_store" enctype="multipart/form-data">
                {% csrf_token %}
               <section class="w3l-form-34-main" id="div1" style="  height: 600px;width: 1000px; border-radius: 8px;box-shadow: 4px 5px 10px lightgray; margin-left: 400px; margin-top: 100px; background-color: white;padding-top: 30px; ">
                 <h1 style="margin: 20px 0 10px 40px;">Login Details</h1>
                 <p style="margin: 0px 0 20px 40px;">Manage your User name email address and password</p>
                 <div style="margin-left:40px ;">
                    <div class="">
                        <p class="text-head">User Name</p>
                        <input type="text" class="input" name="username" id="username" maxlength="30" minlength="3" placeholder="Your Name" pattern="[a-zA-Z\s]+" title="Must contain only characters" value="{{user.username}}" style="width:800px" required />
                                        <div class="">
                        <p class="text-head">Email</p>
                        <input type="email" class="input" name="email" id="email" placeholder="Your Email" pattern="[a-z0-9._%+\-]+@[a-z0-9.\-]+\.[a-z]{2,}$" value="{{user.email}}" style="width:800px" required />
                    </div>
                    <div class="">
                        <p class="text-head">Password</p>
                        <input type="password" class="input" name="password" id="password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" value="{{user.password}}" style="width:800px" placeholder="Password" title="Must contain at least one  number and one uppercase and lowercase letter, and at least 8 or more characters" required />
                    </div>
                    <div>
                        <!-- <p class="text-head">Change Profile Image</p> -->
                        <!-- <input type="file" class="input" style="width:800px" name=""> -->
                    </div>
                    <div style="color:blue ; text-decoration: underline; margin-top: 80px;">
                    <a href="/customer/forgotpage" style="color:blue;">Forgot Password?</a>
                    <a href="/customer/change_password" style="margin-left: 50px; color: blue;"> Change Password</a>
                    </div>
                    
                </div>
            </section>

            </form> 
        
                  
            
           
    </div>


    <script type="text/javascript">

        const imgDiv = document.querySelector('.userimg');
        const img = document.querySelector('#profile-pic'); 
        const file = document.querySelector('#input-file'); 
        const upload = document.querySelector('#uploadbtn');

        file.addEventListener( 'change' , function(){
            const chosedfile = this.files[0];
            if(chosedfile){
                const reader = new FileReader();

                reader.addEventListener( 'load' , function(){
                    img.setAttribute('src' , reader.result);
                })

                reader.readAsDataURL(chosedfile); 
            }
        }) 
        
        // let profilepic = document.getElementsById("profile-pic");
        // let inputfile = document.getElementsById("input-file");

        // inputfile.onchange = function(){
        //     profilepic.src = URL.createObjectURL(inputfile.files[0]);
        // }

    </script>



{% endblock %}